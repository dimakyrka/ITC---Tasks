<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–æ—Å–∫–∞ –∑–∞–¥–∞—á</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; }
        #task-input { width: 70%; padding: 10px; }
        #add-btn { padding: 10px 15px; background: #28a745; color: white; border: none; cursor: pointer; }
        #tasks { margin-top: 20px; list-style: none; padding: 0; }
        .task { background: #f8f9fa; padding: 10px; margin: 5px 0; display: flex; justify-content: space-between; }
        .delete-btn { background: #dc3545; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <h1>üìå –î–æ—Å–∫–∞ –∑–∞–¥–∞—á</h1>
    <div>
        <input type="text" id="task-input" placeholder="–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞...">
        <button id="add-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
    </div>
    <ul id="tasks"></ul>

    <script>
        const JSONBIN_API_KEY = "–¢–í–û–ô_JSONBIN_MASTER_KEY";
        const JSONBIN_BIN_ID = "–¢–í–û–ô_JSONBIN_BIN_ID";
        let tasks = [];

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á
        async function loadTasks() {
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}/latest`, {
                    headers: { "X-Master-Key": JSONBIN_API_KEY }
                });
                const data = await response.json();
                tasks = data.record || [];
                renderTasks();
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á:", error);
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á
        async function saveTasks() {
            try {
                await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}`, {
                    method: "PUT",
                    headers: { "X-Master-Key": JSONBIN_API_KEY, "Content-Type": "application/json" },
                    body: JSON.stringify(tasks)
                });
            } catch (error) {
                console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á:", error);
            }
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–¥–∞—á
        function renderTasks() {
            const tasksList = document.getElementById("tasks");
            tasksList.innerHTML = tasks.map((task, index) => `
                <li class="task">
                    ${task}
                    <button class="delete-btn" data-index="${index}">–£–¥–∞–ª–∏—Ç—å</button>
                </li>
            `).join("");
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è
            document.querySelectorAll(".delete-btn").forEach(btn => {
                btn.addEventListener("click", () => deleteTask(btn.dataset.index));
            });
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
        async function addTask() {
            const input = document.getElementById("task-input");
            const taskText = input.value.trim();
            if (taskText) {
                tasks.push(taskText);
                input.value = "";
                await saveTasks();
                renderTasks();
            }
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏
        async function deleteTask(index) {
            tasks.splice(index, 1);
            await saveTasks();
            renderTasks();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.getElementById("add-btn").addEventListener("click", addTask);
        loadTasks();
    </script>
</body>
</html>
